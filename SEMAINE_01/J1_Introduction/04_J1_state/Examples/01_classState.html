<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Hello React</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- babel => compilation du JSX -->
    <script src="https://unpkg.com/babel-standalone@latest/babel.min.js"></script>
    <style>
        .heading {
            color: purple;
        }
    </style>
</head>

<body>
    <div id="root"></div>
<script type="text/babel">
class TestState extends React.Component {
  constructor(props) {
    super(props);

    // Déclaration d'un état local (state), comprenant un compteur `count` initialisé à 0
    this.state = {
      count: 0,
    };
  }

  render() {
    console.log("ici", Math.random())
    // un setTimeout ne s'exécute qu'une seule fois, c'est le re-render qui ré-exécutera le settimeout
    setTimeout(() => {
      // à chaque fois cela déclenche un re-render
      this.setState({ count: this.state.count + 1 });
      // ne déclenche pas de re-render
      // this.state.count++;
      console.log(this.state.count);
    }, 1000);

    return (
      <div>
        <p>Count: {this.state.count} </p>
      </div>
    );
  }
}

ReactDOM.createRoot(document.getElementById("root")).render(<TestState />);

</script>

</body>

</html>